:root{
  --bg:#fff;
  --fg:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --shadow:0 10px 30px rgba(0,0,0,.08);
  --card:#fff;
  --radius:16px;
  --blue:#1d4ed8;
  --blue-600:#2563eb;
  --red:#B5121B;
  --gold:#C9A227;
  --silver:#C0C0C0;
  /* Global UI scale for controls/labels/buttons */
  --ui-scale: 1.5;
  /* Specific scale for control HEIGHT to fine-tune bar thickness */
  --control-scale: 1.2;
  /* Typography */
  --font-sans: 'Plus Jakarta Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  --font-head: 'Plus Jakarta Sans', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  /* Sidebar width for the vertical header */
  --sidebar-w: 120px;
  /* Control height (slightly smaller than before), still fluid */
  --control-h: clamp(calc(40px * var(--control-scale)), calc(5.5vw * var(--control-scale)), calc(48px * var(--control-scale)));
  /* Preview height (smaller, but roomy enough for images) */
  --preview-h: clamp(140px, 22vw, 200px);
  /* Input/preview width inside each column; overridden on desktop */
  --input-w: 100%;
  /* App width base (will be scaled by --ui-scale) */
  --app-max-w-base: 1100px;
  /* Dropdown (sd) decorations */
  --sd-icon-size: 30px;
  --sd-icon-gap: 8px;
  --sd-right-pad: calc(var(--sd-icon-size) + var(--sd-icon-gap) + 8px);
  /* Space reserved in preview headers for action buttons */
  --pv-actions-w: 104px; /* two 36px buttons + gaps/margins */
  /* Holokai card scaling + width */
  --holokai-card-scale: 1;   /* visual scale; try 0.85/0.8 for smaller */
  --holokai-card-width: 80%;   /* logical width of the card block */
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  /* App background image (keeps header white since header has its own background) */
  background-color:var(--bg);
  /* Top nearly white, bottom transparent to reveal image progressively */
  background-image:
    linear-gradient(
      to bottom,
      rgba(255,255,255,0.95) 0%,
      rgba(255,255,255,0.88) 30%,
      rgba(255,255,255,0.35) 50%,
      rgba(255,255,255,0.35) 75%,
      rgba(255,255,255,0.00) 100%
    ),
    url('/assets/Background.svg');
  background-repeat:no-repeat;
  background-position:center top;
  background-size:cover;
  color:var(--fg);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased; text-rendering: optimizeLegibility;
}

<<<<<<< HEAD
/* Header: always a fixed top bar */
.site-header{
  position:fixed; top:0; left:0; right:0;
  width:100%; height:80px;
  background:#fff; border-bottom:1px solid #eee; border-right:none;
  display:flex; align-items:center; justify-content:flex-start;
  padding:0 12px; z-index:60; box-shadow:0 3px 7px rgba(0,0,0,.10);
}
.logo{ height:70px; width:auto; display:block; }
=======
/* Header: vertical on desktop, horizontal at mobile */
.site-header{
  position:fixed; inset:0 auto 0 0; /* top:0; bottom:0; left:0 */
  width:var(--sidebar-w);           /* vertical sidebar width */
  background:#fff; border-right:1px solid #eee;
  display:flex; align-items:flex-start; justify-content:center;
  padding:16px 0; z-index:60; box-shadow:0 3px 7px rgba(0,0,0,.10);
}
.logo{ height:100px; width:auto; display:block; }
>>>>>>> 9897865 (new ui)

/* Burger button (hidden on desktop) */
.burger-btn{ display:none; align-self:center; width:36px; height:28px; border:none; background:transparent; cursor:pointer; }
.burger-line{ display:block; height:3px; background:#111827; margin:5px 0; border-radius:2px; }

/* Mobile drawer: overlaps half of the sidebar width */
.mobile-drawer{
  position:fixed; top:0; left:0; height:100vh; width:calc(var(--sidebar-w) / 2);
  transform:translateX(-100%);
  transition:transform .25s ease;
  background:#fff;
  box-shadow:0 2px 8px rgba(0,0,0,.12);
  z-index:70; /* above header */
}
.mobile-drawer.open{ transform:translateX(0); }
.drawer-content{ padding:12px; }

/* Page shell */
.app{
  max-width: calc(var(--app-max-w-base) * var(--ui-scale));
  margin:40px auto 80px;
<<<<<<< HEAD
  /* top padding to clear header, remove sidebar offset */
  padding:72px 16px 60px 16px;
=======
  padding:0 16px 0 calc(var(--sidebar-w) + 16px); /* leave room for sidebar */
>>>>>>> 9897865 (new ui)
}
.app-title{
  text-align:center;
  font-weight:700;
  font-size:34px;
  margin:12px 0 24px;
}

/* Section title that sits above the card */
.section-title{
  margin: 24px 0 10px;
  font-size: calc(16px * var(--ui-scale));             /* more paragraph-like, scaled */
  font-weight: 400;            /* not bold */
  color:#374151;
}

/* Headings use modern display font */
h1,h2,h3,h4,h5,h6,
.app-title,
.section-title{
  font-family: var(--font-head);
  letter-spacing:-0.01em;
}

/* Card */
.card{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:28px 24px;
}

<<<<<<< HEAD
/* Constraints layout */
.constraints-layout{
  display:grid;
  grid-template-columns: 300px 1fr;
  gap:24px;
  margin-top:24px;
}
@media (max-width: 900px){
  .constraints-layout{ grid-template-columns: 1fr; }
}
.constraints-sidebar{
  display:flex; flex-direction:column; gap:14px;
  position:sticky; top:96px;
  /* Remove scroll from sidebar per request; let page scroll instead */
  max-height:none; overflow:visible;
}
.sidebar-box{ padding:16px; }
.sidebar-box.small{ --ui-scale: 0.9; --control-scale: 0.8; }
.sidebar-box .card-title{ margin-top:0; margin-bottom:10px; font-size:16px; }
.sidebar-box .field label{ font-size:12px; margin-bottom:6px; }
.sidebar-box .sd-input{ height: calc(var(--control-h) * .8); font-size: 13px; padding: 6px 10px; }
.sidebar-box .sd-list{ max-height: 160px; }
.sidebar-box .sd-item{ font-size: 13px; padding: 8px 10px; }
.sidebar-box .select-control{ height: calc(var(--control-h) * .8); font-size:13px; padding:6px 34px 6px 10px; }
.ai-box textarea{ font-size: 13px; }
.ai-box .btn{ font-size: 0.9rem; padding: 8px 12px; }
.constraints-sidebar .field{ margin-bottom:6px; }
.constraints-sidebar .select-control{
  width:100%; height:var(--control-h);
  border:1px solid var(--border); border-radius:10px;
  padding: 8px 36px 8px 12px; font-size:14px; font-family: var(--font-sans);
  background:#fff; color:var(--fg);
  appearance:none; -webkit-appearance:none; -moz-appearance:none;
  background-image: url("data:image/svg+xml,%3Csvg width='16' height='16' viewBox='0 0 16 16' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M4.646 6.646a.5.5 0 01.708 0L8 9.293l2.646-2.647a.5.5 0 11.708.708l-3 3a.5.5 0 01-.708 0l-3-3a.5.5 0 010-.708z' fill='%236B7280'/%3E%3C/svg%3E");
  background-repeat:no-repeat;
  background-position: right 12px center; /* move arrow left a bit */
  background-size: 18px;
}
.field-inline{ display:flex; align-items:center; justify-content:space-between; }
.constraints-chat{ margin-top:10px; display:flex; flex-direction:column; gap:8px; }
.constraints-chat textarea{
  width:100%; resize:vertical; border:1px solid var(--border); border-radius:10px;
  padding:10px; font-family: var(--font-sans);
}
.constraints-canvas{ min-height: 400px; background: rgba(0,0,0,0.03); border:1px dashed #e5e7eb; border-radius:12px; }

/* Stats box */
.stats-box{
  display:grid; grid-template-columns: repeat(4, 1fr); gap:14px;
  background:#fff; border:1px solid var(--border); border-radius:12px; box-shadow: var(--shadow);
  padding:14px 18px; margin-bottom:18px;
}
.stats-box .stat{ display:flex; flex-direction:column; align-items:center; justify-content:center; padding:8px; }
.stats-box .label{ color:#6b7280; font-size:13px; }
.stats-box .value{ color:#111827; font-weight:700; font-size:18px; }

/* Year sections */
.year-section{ margin-bottom:28px; }
.year-header{ display:flex; align-items:baseline; gap:16px; margin:8px 0 12px; }
.year-title{ font-weight:700; font-size:18px; color:#111827; }
.year-credits{ color:#6b7280; font-size:14px; }

/* Semesters row: three cards */
.semesters-row{ display:grid; grid-template-columns: repeat(3, 1fr); gap:16px; }
.semester-card{
  background:#fff; border:1px solid var(--border); border-radius:12px; box-shadow: var(--shadow);
  min-height: 220px; display:flex; flex-direction:column; overflow:hidden;
}
.sem-header{ padding:10px 12px; font-weight:600; color:#111827; border-bottom:1px solid var(--border); }
.courses{ flex:1; padding:10px; }
.sem-footer{ padding:8px 12px; color:#6b7280; font-size:13px; border-top:1px solid var(--border); }

@media (max-width: 900px){
  .stats-box{ grid-template-columns: 1fr 1fr; }
  .semesters-row{ grid-template-columns: 1fr; }
}

/* Placeholder before generation */
.canvas-placeholder{
  background:#fff; border:1px dashed var(--border); border-radius:12px;
  padding:22px; text-align:center; color:#6b7280; font-size:15px;
}

/* Box action buttons within Constraints */
.constraints-box .box-actions{ display:flex; gap:10px; justify-content:flex-end; margin-top:20px; }
.btn.export{ background:#f59e0b; color:#fff; }
.btn.export:hover{ filter:brightness(.95); }

/* Side-by-side small fields row within sidebar boxes */
.fields-row{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
@media (max-width: 900px){ .fields-row{ grid-template-columns: 1fr; } }

/* Disabled look for selects when limited is off */
.select-control:disabled{ background:#f3f4f6; color:#9ca3af; cursor:not-allowed; }

=======
>>>>>>> 9897865 (new ui)
/* Holokai card: more inner spacing */
#step-holokai.card{
  position: relative;
  padding: 56px 48px 48px; /* increased padding for breathing room */
  /* Visual scale and centered width compensation */
  transform: scale(var(--holokai-card-scale));
  transform-origin: top center;
  width: calc(var(--holokai-card-width) / var(--holokai-card-scale));
  margin-inline: auto;
  /* Appear + slight rise on load */
  opacity: 0;
  animation: fade-up .6s ease-out .08s both;
}

/* Scale everything inside the Holokai card to ~75% */
#step-holokai{
  /* Reduce UI scale locally to shrink fonts/controls inside the card */
  --ui-scale: 1.0;
  --control-scale: 0.9;
}

/* Tighter preview header typography inside the card */
#step-holokai .pv-head{ padding: 14px 12px 8px; padding-right: var(--pv-actions-w); }
#step-holokai .pv-title{ font-size: 14px; }
#step-holokai .pv-holokai,
#step-holokai .pv-credits{ font-size: 11px; }

/* Make the "1. Choose your Holokai" text 75% */
#holokai-title.section-title{ font-size: calc(16px * var(--ui-scale) * .75); }
/* Title entry */
#holokai-title.section-title{
  opacity: 0;
  animation: fade-up .5s ease-out 0s both;
  /* Align with card width and center */
  width: calc(var(--holokai-card-width) / var(--holokai-card-scale));
  margin-inline: auto;
  text-align: left;
}

/* Make the Next button 75% sized */
.actions-outside .btn.next{
  font-size: calc(1rem * .75);
  padding: calc(10px * .75) calc(16px * .75);
}

/* Help button at top-right of the Holokai card */
#step-holokai .card-help{
  position:absolute;
  top:12px; right:12px;
  width:36px; height:36px; /* slightly larger */
  border-radius:999px;
  border:1px solid var(--border);
  background:#f9fafb; color:#374151;
  display:grid; place-items:center;
  font-weight:700; font-family: var(--font-head);
  line-height:1; font-size:14px;
  cursor:pointer;
}
#step-holokai .card-help:hover{ background:#f3f4f6; }
#step-holokai .card-help:focus{ outline:none; box-shadow:0 0 0 3px rgba(37,99,235,.15); }
.card-title{
  margin:0 0 18px;
  font-weight:400;          /* not bold */
  font-size:18px;           /* smaller */
  color:#374151;
}

/* 3-column grid */
.grid-3{
  display:grid;
  grid-template-columns: 1fr; /* single column on mobile */
  gap:20px;
}
@media (min-width:768px){
  .grid-3{ grid-template-columns: repeat(2, 1fr); }
}
@media (min-width:900px){
  .grid-3{grid-template-columns:repeat(3,1fr)}
}

/* On small screens, let Minor 2 wrap to next row at same size (default flow) */

.field label{
  display:block;
  font-size:calc(14px * var(--ui-scale));
  font-weight:600;
  color:#374151;
  margin-bottom:8px;
  width:var(--input-w);           /* match input width */
  margin-inline:auto;             /* center to align with input */
  text-align:left;                /* keep label text left-aligned */
}

/* Searchable dropdown */
.sd{ position:relative; width:var(--input-w); margin-inline:auto; }
.sd-input{
  width:100%;
<<<<<<< HEAD
  height: calc(var(--control-h) * .85); /* make shorter */
=======
  height:var(--control-h);
>>>>>>> 9897865 (new ui)
  /* Comfortable padding */
  padding: calc(8px * var(--control-scale)) calc(18px * var(--ui-scale));
  border:1px solid var(--border); border-radius:10px;
  outline:none; font-size:calc(15px * var(--ui-scale));
  transition:border-color .15s ease, box-shadow .15s ease;
}
.sd-input:focus{
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(37,99,235,.15);
}
.sd-list{
  position:absolute; top:calc(100% + 6px); left:0; right:0; /* stretch to full input width */
  max-height:calc(160px * var(--ui-scale)); overflow:auto;   /* scaled dropdown height */
  border:1px solid var(--border); background:#fff;
  border-radius:10px; box-shadow:var(--shadow);
  padding:6px 0; display:none; z-index:20;
  width:100%;
}
.sd-item{
  padding:calc(7px * var(--ui-scale)) calc(10px * var(--ui-scale)); font-size:calc(14px * var(--ui-scale));  /* scaled item size */
  display:flex; align-items:center; gap:8px; cursor:pointer;
}

/* Hide any legacy per-search help buttons */
.sd .sd-help{ display:none !important; }
.sd-item:hover{background:#f9fafb}
.sd-item.disabled{opacity:.45; cursor:not-allowed}
.dot{ width:10px; height:10px; border-radius:999px; display:inline-block; }
.dot.red{background:var(--red)}
.dot.gold{background:var(--gold)}
.dot.silver{background:var(--silver)}
.dot.gray{background:#d1d5db}

/* Preview cards */
.preview{
  margin-top:28px; /* even more space between search and preview */
  border:none;                 /* no outline */
  border-radius:12px;
  color:var(--muted);
  background:#fff;             /* white card */
  box-shadow:0 3px 7px rgba(0,0,0,.10); /* sharper, less blur */
  aspect-ratio: 5 / 4;         /* slightly shorter than a square */
  overflow:hidden;
  width:var(--input-w);        /* align with input width */
  margin-inline:auto;          /* center under the input */
  display:grid; grid-template-rows: auto 1fr; align-items:stretch; justify-items:stretch; /* header, image */
  position:relative;
}

/* Square placeholder variant (for "No course selected") */
.preview.square{
  width:var(--input-w);
  height:auto;
  padding:14px; text-align:center;
  margin:10px auto 0;
  display:flex; align-items:center; justify-content:center;
}

/* When filled, switch back to full-width info card */
.preview.filled{
  background:#fff; color:var(--fg);
  width:var(--input-w); height:auto; margin:10px auto 0;
}

/* Preview content */
.pv-head{ padding:18px 16px 10px; padding-right: var(--pv-actions-w); background:#fff; }
.pv-title{ font-weight:700; color:#111827; font-size:18px; margin:0 0 8px; }
.pv-title{ white-space: normal; word-break: break-word; }
.pv-holokai{ display:flex; align-items:center; gap:8px; color:#6b7280; font-size:14px; margin-bottom:6px; }
.pv-holokai .dot{ width:10px; height:10px; }
.pv-credits{ color:#6b7280; font-size:14px; }
.pv-img{ position:relative; }
.pv-img img{ width:100%; height:100%; object-fit:cover; display:block; }

/* Actions pinned to top-right of the header row */
.pv-actions{
  position:absolute; top:10px; right:10px; z-index:2;
  display:flex; gap:2px; align-items:center;
}
.pv-action::part(base){
  background:transparent; /* remove dark background */
  color:#111827;          /* dark icon color */
  width:36px; height:36px;
}
.pv-action:hover::part(base){ background:transparent; opacity:.85; }
.pv-action:focus-visible::part(base){ outline:none; box-shadow:none; }

/* Footer actions */
.actions{ display:flex; justify-content:flex-end; margin-top:18px; }
.actions-outside{ margin-top:14px; padding-right:24px; }   /* indent Next from the right edge */
/* Next button entry */
.actions-outside{
  opacity: 0;
  animation: fade-up .6s ease-out .18s both;
  /* Align with card width and center */
  width: calc(var(--holokai-card-width) / var(--holokai-card-scale));
  margin-inline: auto;
}

.btn{ appearance:none; border:none; cursor:pointer; border-radius:999px; padding:calc(10px * var(--ui-scale)) calc(16px * var(--ui-scale)); font-weight:600; font-size:calc(1rem * var(--ui-scale)); }
.btn.next{ background:var(--blue-600); color:#fff; box-shadow:0 2px 0 rgba(0,0,0,.05); }
.btn.next:disabled{ background:#cbd5e1; cursor:not-allowed; }

/* Helper legend */
.legend{ display:flex; gap:16px; align-items:center; justify-content:center; flex-wrap:wrap; color:var(--muted); font-size:15px; margin-top:45px; }
.legend .item{ display:flex; align-items:center; gap:8px; }
.legend .dot{ width:12px; height:12px; }

/* Generic fade-up animation */
@keyframes fade-up{
  0%{ opacity:0; transform: translateY(14px); }
  100%{ opacity:1; transform: translateY(0); }
}

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce){
  #holokai-title.section-title,
  #step-holokai.card,
  .actions-outside{
    animation: none !important;
    opacity: 1 !important;
  }
}

/* On wider screens, narrow inputs/previews a bit to add breathing room */
@media (min-width:900px){
  :root{ --input-w: 100%; }
}

<<<<<<< HEAD
/* At tablet and below, slightly reduce side padding */
@media (max-width: 900px){
  .app{ padding:72px 12px 60px 12px; }
=======
/* At tablet and below, convert header to top horizontal bar */
@media (max-width: 900px){
  .site-header{
    inset:auto 0 auto 0; top:0; left:0; right:0; bottom:auto;
    width:100%; height:80px; border-right:none; border-bottom:1px solid #eee;
    flex-direction:row; align-items:center; justify-content:flex-start; padding:0 12px;
  }
  .logo{ height:70px; }
  .app{ padding:72px 12px 60px 12px; } /* top padding to clear header, remove sidebar offset */
>>>>>>> 9897865 (new ui)
}

/* Mobile behavior */
@media (max-width: 768px){
  /* Hide legacy top menubar when sidebar is present */
  #menubar{ display:none !important; }
  /* Show burger button in sidebar */
  .burger-btn{ display:block; }
}